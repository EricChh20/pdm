language: android
jdk: oraclejdk8
sudo: false
android:
  components:
  - tools
  - platform-tools
  - tools
  - build-tools-25.0.2
  - android-25
  - sys-img-armeabi-v7a-android-22
  - extra-android-m2repository
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.android/build-cache"
after_success:
- sh set_tags.sh
script:
- bash ./gradlew assembleDebug

deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: nbwoXLXDF1RGAZKFebG5tdVcR+2rJsRDem5RZP+KFAlcD/FwJzEBA3+OGGLaYk8GkZ7mQOSFqi/RNniSE+VZT5okfpNOBIST00yUmcAqciy0A7r+aKaUq551cH4HS6LRMkMtRjXyHRHy6Wm3GxMR2HNI+3wQzBHRZkL/HD7ZgXzEekEbf1l1wZPDsMkqtGZSGPF9KTt++t/0bqy/X5ffbuXfI87EJQkZUFAMqncxtds/64VafmOmSERS2PQRwqgafLFEmeao9N18HUgHblg57uIiA9jYW9KHVPJd2K56CmDm5xxKjnr0h7CvNRTWzC24gcRPR7ym8odd2kUptLHiUcq5W4oxd49rg5rpP8uHC7mEmyzn1sMp0NdUnL2e1ReEaYfwc88beEA8fAoWStINNqk4cgNAplmatJcxX5I1+Q5D+SxRDpebbMhLJdvovBgUSU3rSjG+PZI/OSRb+m/tnOjOy2SwFFSQpWUjtlXf2LX29SgKmIkj7/MIxbwtLu+frHWtpYfpzyAyMew2ZM6t2G99zhtmueXaIjGzFR4aKF42lrrsYUrTY7zDVpGZXIusfn/sGbl39ZMHSHGhOvNOLr1MqOzK/Ec24yYf0Ab8dswHmYZordLL19siqYvRByC6biCO+vI08Jcj/KDpj02YQ7n6N9jrHkNk5GnuRGCpKks=
  file: "./app/build/outputs/apk/app*.apk"
  file_glob: true
  on:
    repo: ItsForkIt/pdm
    branch: newStable
